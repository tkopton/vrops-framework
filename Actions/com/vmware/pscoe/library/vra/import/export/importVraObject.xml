<?xml version='1.0' encoding='UTF-8'?>
<dunes-script-module name="importVraObject" result-type="Any" api-version="6.0.0" id="com.vmware.pscoe.library.vra.import.export.importVraObject" version="2.4.0" allowed-operations="evf" category-name="com.vmware.pscoe.library.vra.import.export">
  <description><![CDATA[
 @deprecated Use VraObjectType.importFrom()

 @param {vCACCAFE:VCACHost} host
 @param {string} type
 @param {ResourceElement|String} resourceElementOrString
 @param {boolean} allTenants
]]></description>
  <param n="host" t="vCACCAFE:VCACHost"><![CDATA[]]></param>
  <param n="type" t="string"><![CDATA[]]></param>
  <param n="resourceElementOrString" t="ResourceElement|String"><![CDATA[]]></param>
  <param n="allTenants" t="boolean"><![CDATA[]]></param>
  <script encoded="false"><![CDATA[var def = System.getModule("com.vmware.pscoe.library.vra.import.export.types")[type]();
var nameProperty = def.nameProperty;
var beforeSave = def.beforeSave;
var clazz = System.getModule("com.vmware.pscoe.library.vra")[type](host);
var content = resourceElementOrString;

if (content instanceof ResourceElement) {
	content = content.getContentAsMimeAttachment().content;
}

var newObj = new clazz(JSON.parse(content));

if (beforeSave) {
	var currentObj = clazz.getByName(newObj[nameProperty]);
	beforeSave(newObj, currentObj, host, allTenants);
}

newObj.save();
return clazz.getByName(newObj[nameProperty]);
]]></script>
</dunes-script-module>