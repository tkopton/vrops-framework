<?xml version='1.0' encoding='UTF-8'?>
<workflow xmlns="http://vmware.com/vco/workflow" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://vmware.com/vco/workflow http://vmware.com/vco/workflow/Workflow-v4.xsd" root-name="item1" object-name="workflow:name=generic" id="46d25f4b-76c8-4f82-83e8-7e4e3bcc939c" version="0.0.1" api-version="6.0.0" allowed-operations="evf" restartMode="1" resumeFromFailedMode="0">
  <display-name><![CDATA[getSLADetails]]></display-name>
  <position y="50.0" x="100.0"/>
  <input>
    <param name="sla" type="string"/>
  </input>
  <output>
    <param name="antiVirus" type="string"/>
    <param name="repInterval" type="number"/>
    <param name="repQuies" type="string"/>
    <param name="backupInterval" type="string"/>
    <param name="backupType" type="string"/>
    <param name="monitoring" type="string"/>
  </output>
  <attrib name="jdbcString" type="string" read-only="false" conf-id="58c3ef46-179e-4056-b74a-7a6a4180c3d8" conf-key="JDBCString">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <attrib name="dbUser" type="string" read-only="false" conf-id="58c3ef46-179e-4056-b74a-7a6a4180c3d8" conf-key="DBUser">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <attrib name="dbPass" type="SecureString" read-only="false" conf-id="58c3ef46-179e-4056-b74a-7a6a4180c3d8" conf-key="DBUserPassword">
    <value encoded="n"><![CDATA[]]></value>
  </attrib>
  <workflow-item name="item0" type="end" end-mode="0">
    <position y="45.40909090909091" x="384.5"/>
  </workflow-item>
  <workflow-item name="item1" out-name="item0" type="task">
    <display-name><![CDATA[get SLA Details]]></display-name>
    <script encoded="false"><![CDATA[sqlStatement="SELECT * FROM SLADefinition WHERE SLA ='" + sla + "';";
var main = new JDBCConnection();
var con;
var returnValue;
try  {
	con = main.getConnection( jdbcString, dbUser, dbPass );
	var stat = con.createStatement();
	var results = stat.executeQuery( sqlStatement );
	results.next();
	repInterval=results.getNumberAt(6);
	repQuies=results.getStringAt(7);
//	backupNeeded=results.getStringAt(8);
//	backupAgend=results.getStringAt(9);
//	backupCheck=results.getStringAt(10);
	backupInterval=results.getStringAt(11);
//	backupRestore=results.getStringAt(12);
	backupType=results.getStringAt(13);
//	backupSystem=results.getStringAt(14);
	antiVirus=results.getStringAt(15);
	monitoring=results.getStringAt(16);
	stat.close();
	if (repInterval!="0"){
		replicationNeeded="true";
	} else {
		replicationNeeded="false";
	}
}
catch( ex )  {
	throw "Connection to database failed (Reason: " + ex + ")";
} finally {
	if (con) {
		con.close();
	}
}]]></script>
    <in-binding>
      <bind name="jdbcString" type="string" export-name="jdbcString"/>
      <bind name="dbUser" type="string" export-name="dbUser"/>
      <bind name="dbPass" type="SecureString" export-name="dbPass"/>
      <bind name="sla" type="string" export-name="sla"/>
    </in-binding>
    <out-binding>
      <bind name="antiVirus" type="string" export-name="antiVirus"/>
      <bind name="backupInterval" type="string" export-name="backupInterval"/>
      <bind name="backupType" type="string" export-name="backupType"/>
      <bind name="monitoring" type="string" export-name="monitoring"/>
      <bind name="repInterval" type="number" export-name="repInterval"/>
      <bind name="repQuies" type="string" export-name="repQuies"/>
    </out-binding>
    <position y="55.40909090909091" x="204.5"/>
  </workflow-item>
  <presentation>
    <p-param name="sla">
      <desc><![CDATA[sla]]></desc>
    </p-param>
  </presentation>
</workflow>